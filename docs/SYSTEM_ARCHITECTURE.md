# 시스템 아키텍처 다이어그램

## 1. 전체 시스템 아키텍처

```
┌────────────────────────────────────────────────────────────────────────┐
│                          사용자 (브라우저)                                │
└────────────────────────────────┬───────────────────────────────────────┘
                                 │
                    ┌────────────┴────────────┐
                    │                         │
                    ▼                         ▼
         ┌──────────────────┐      ┌──────────────────┐
         │  GitHub Pages    │      │     Vercel       │
         │  (정적 호스팅)    │      │  (프론트엔드)     │
         └────────┬─────────┘      └────────┬─────────┘
                  │                         │
                  └──────────┬──────────────┘
                             │
                             ▼
              ┌──────────────────────────┐
              │   Frontend Application    │
              │   ┌──────────────────┐   │
              │   │   React (Vite)   │   │
              │   │   - DOM/BOM      │   │
              │   │   - JSX          │   │
              │   │   - Hooks        │   │
              │   └────────┬─────────┘   │
              │            │              │
              │   ┌────────┴─────────┐   │
              │   │  TensorFlow.js   │   │
              │   │  (관심도 측정)    │   │
              │   │  - 9 feature NN  │   │
              │   │  - Real-time     │   │
              │   └──────────────────┘   │
              └────────────┬─────────────┘
                           │ HTTP/REST API
                           │
                           ▼
         ┌─────────────────────────────────────┐
         │       Backend Server (Node.js)       │
         │  ┌───────────────────────────────┐  │
         │  │     Express.js Framework       │  │
         │  │  ┌─────────────────────────┐  │  │
         │  │  │   API Routes            │  │  │
         │  │  │  - /api/projects        │  │  │
         │  │  │  - /api/skills          │  │  │
         │  │  │  - /api/guestbook       │  │  │
         │  │  │  - /api/stats           │  │  │
         │  │  │  - /api/comments        │  │  │
         │  │  └──────────┬──────────────┘  │  │
         │  │             │                  │  │
         │  │  ┌──────────┴──────────────┐  │  │
         │  │  │   Mongoose ODM          │  │  │
         │  │  │   MySQL2 Driver         │  │  │
         │  │  └──────────┬──────────────┘  │  │
         │  └─────────────┼──────────────────┘  │
         └────────────────┼─────────────────────┘
                          │
                ┌─────────┴─────────┐
                │                   │
                ▼                   ▼
    ┌───────────────────┐  ┌───────────────────┐
    │     MongoDB       │  │      MySQL        │
    │  (NoSQL DB)       │  │   (Relational)    │
    │                   │  │                   │
    │  Collections:     │  │  Tables:          │
    │  - comments       │  │  - projects       │
    │  - guestbook      │  │  - skills         │
    │  - sessions       │  │  - visit_stats    │
    └───────────────────┘  └───────────────────┘
```

## 2. 배포 아키텍처 (Docker + Kubernetes)

```
┌──────────────────────────────────────────────────────────────────┐
│                      GitHub Repository                           │
│                    (Source Code + CI/CD)                         │
└────────────────────────┬─────────────────────────────────────────┘
                         │ Git Push
                         ▼
┌──────────────────────────────────────────────────────────────────┐
│                     GitHub Actions (CI/CD)                        │
│  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐          │
│  │  Build       │→ │  Test        │→ │  Deploy      │          │
│  │  - npm build │  │  - Jest      │  │  - Docker    │          │
│  │  - Docker    │  │  - Lint      │  │  - K8s       │          │
│  └──────────────┘  └──────────────┘  └──────┬───────┘          │
└─────────────────────────────────────────────┼────────────────────┘
                                              │
                    ┌─────────────────────────┴───────────────┐
                    │                                         │
                    ▼                                         ▼
         ┌────────────────────┐                  ┌────────────────────┐
         │  Docker Registry   │                  │  Kubernetes Cluster│
         │  (Docker Hub)      │                  │                    │
         │                    │                  │  ┌──────────────┐ │
         │  Images:           │                  │  │   Ingress    │ │
         │  - frontend:latest │                  │  │  Controller  │ │
         │  - backend:latest  │                  │  └──────┬───────┘ │
         └────────────────────┘                  │         │         │
                                                 │  ┌──────┴───────┐ │
                                                 │  │   Services   │ │
                                                 │  │  - API       │ │
                                                 │  │  - MongoDB   │ │
                                                 │  └──────┬───────┘ │
                                                 │         │         │
                                                 │  ┌──────┴───────┐ │
                                                 │  │  Deployments │ │
                                                 │  │  - API Pods  │ │
                                                 │  │  - DB Pods   │ │
                                                 │  └──────┬───────┘ │
                                                 │         │         │
                                                 │  ┌──────┴───────┐ │
                                                 │  │Persistent Vol│ │
                                                 │  │  - MongoDB   │ │
                                                 │  │    Storage   │ │
                                                 │  └──────────────┘ │
                                                 └────────────────────┘
```

## 3. 컨테이너 구조

```
┌────────────────────────────────────────────────────────────────┐
│                     Docker Compose Stack                        │
│                                                                 │
│  ┌──────────────────────────────────────────────────────────┐ │
│  │            Frontend Container (frontend:latest)           │ │
│  │  ┌────────────────────────────────────────────────────┐  │ │
│  │  │  Nginx Web Server                                  │  │ │
│  │  │  Port: 80                                          │  │ │
│  │  │  ┌──────────────────────────────────────────────┐ │  │ │
│  │  │  │  Static Files (HTML, CSS, JS, Images)       │ │  │ │
│  │  │  │  - Optimized React Build                     │ │  │ │
│  │  │  │  - TensorFlow.js Model                       │ │  │ │
│  │  │  └──────────────────────────────────────────────┘ │  │ │
│  │  └────────────────────────────────────────────────────┘  │ │
│  └──────────────────────┬───────────────────────────────────┘ │
│                         │                                      │
│  ┌──────────────────────┴───────────────────────────────────┐ │
│  │            Backend Container (backend:latest)             │ │
│  │  ┌────────────────────────────────────────────────────┐  │ │
│  │  │  Node.js Runtime Environment                       │  │ │
│  │  │  Port: 3000                                        │  │ │
│  │  │  ┌──────────────────────────────────────────────┐ │  │ │
│  │  │  │  Express.js Application                      │ │  │ │
│  │  │  │  - API Routes                                 │ │  │ │
│  │  │  │  - Middleware (CORS, Logger)                 │ │  │ │
│  │  │  │  - Database Connections                      │ │  │ │
│  │  │  └──────────────────────────────────────────────┘ │  │ │
│  │  └────────────────────────────────────────────────────┘  │ │
│  └──────────────────────┬───────────────────────────────────┘ │
│                         │                                      │
│  ┌──────────────────────┴───────────────────────────────────┐ │
│  │          MongoDB Container (mongo:latest)                 │ │
│  │  ┌────────────────────────────────────────────────────┐  │ │
│  │  │  MongoDB Server                                    │  │ │
│  │  │  Port: 27017                                       │  │ │
│  │  │  Volume: ./data/mongodb                           │  │ │
│  │  │  Database: portfolio                               │  │ │
│  │  └────────────────────────────────────────────────────┘  │ │
│  └────────────────────────────────────────────────────────────┘ │
│                                                                 │
│  ┌──────────────────────────────────────────────────────────┐ │
│  │            MySQL Container (mysql:8.0)                    │ │
│  │  ┌────────────────────────────────────────────────────┐  │ │
│  │  │  MySQL Server                                      │  │ │
│  │  │  Port: 3306                                        │  │ │
│  │  │  Volume: ./data/mysql                             │  │ │
│  │  │  Database: portfolio_db                            │  │ │
│  │  │  Init Script: ./mysql/init.sql                    │  │ │
│  │  └────────────────────────────────────────────────────┘  │ │
│  └────────────────────────────────────────────────────────────┘ │
└────────────────────────────────────────────────────────────────┘
```

## 4. 네트워크 흐름도

```
┌──────────────┐
│   Browser    │
└──────┬───────┘
       │ HTTPS
       │
       ▼
┌──────────────┐
│  Cloudflare  │ (CDN / DNS)
│  DNS Proxy   │
└──────┬───────┘
       │
       ├─────────────────────────────────┐
       │                                 │
       ▼                                 ▼
┌────────────────┐            ┌────────────────┐
│ GitHub Pages   │            │    Vercel      │
│ (Static Host)  │            │ (Static Host)  │
└──────┬─────────┘            └──────┬─────────┘
       │                             │
       └──────────┬──────────────────┘
                  │ API Request
                  │ (Cross-Origin)
                  ▼
         ┌────────────────┐
         │  CORS Handler  │ (Backend Middleware)
         └────────┬───────┘
                  │
                  ▼
         ┌────────────────┐
         │  Load Balancer │ (Kubernetes Service)
         └────────┬───────┘
                  │
      ┌───────────┼───────────┐
      │           │           │
      ▼           ▼           ▼
┌─────────┐ ┌─────────┐ ┌─────────┐
│ API Pod │ │ API Pod │ │ API Pod │ (Replicas: 3)
│ (Node)  │ │ (Node)  │ │ (Node)  │
└────┬────┘ └────┬────┘ └────┬────┘
     │           │           │
     └───────────┼───────────┘
                 │
     ┌───────────┴───────────┐
     │                       │
     ▼                       ▼
┌──────────┐           ┌──────────┐
│ MongoDB  │           │  MySQL   │
│ Service  │           │ Service  │
└──────────┘           └──────────┘
```

## 5. 보안 아키텍처

```
┌────────────────────────────────────────────────────────────┐
│                      Security Layers                        │
│                                                             │
│  ┌────────────────────────────────────────────────────┐   │
│  │  Layer 1: Network Security                         │   │
│  │  - HTTPS/TLS 1.3                                   │   │
│  │  - Cloudflare DDoS Protection                      │   │
│  │  - Rate Limiting                                    │   │
│  └────────────────────────────────────────────────────┘   │
│                         │                                   │
│  ┌────────────────────┴────────────────────────────────┐   │
│  │  Layer 2: Application Security                      │   │
│  │  - CORS Policy (Whitelist)                          │   │
│  │  - Input Validation (Express-validator)            │   │
│  │  - XSS Protection (Helmet.js)                       │   │
│  │  - SQL Injection Prevention (Parameterized Queries)│   │
│  └────────────────────────────────────────────────────┘   │
│                         │                                   │
│  ┌────────────────────┴────────────────────────────────┐   │
│  │  Layer 3: Authentication & Authorization            │   │
│  │  - JWT Token (HttpOnly Cookie)                      │   │
│  │  - Session Management (MongoDB)                     │   │
│  │  - Role-Based Access Control (RBAC)                │   │
│  └────────────────────────────────────────────────────┘   │
│                         │                                   │
│  ┌────────────────────┴────────────────────────────────┐   │
│  │  Layer 4: Data Security                             │   │
│  │  - Environment Variables (.env)                     │   │
│  │  - Secrets Management (K8s Secrets)                 │   │
│  │  - Database Encryption at Rest                      │   │
│  │  - Password Hashing (bcrypt)                        │   │
│  └────────────────────────────────────────────────────┘   │
│                         │                                   │
│  ┌────────────────────┴────────────────────────────────┐   │
│  │  Layer 5: Infrastructure Security                   │   │
│  │  - Container Isolation (Docker)                     │   │
│  │  - Network Policies (K8s)                           │   │
│  │  - Resource Limits (CPU/Memory)                     │   │
│  │  - Security Context (Non-root User)                 │   │
│  └────────────────────────────────────────────────────┘   │
└────────────────────────────────────────────────────────────┘
```

## 6. 모니터링 & 로깅 아키텍처

```
┌──────────────────────────────────────────────────────────────┐
│                    Application Layer                          │
│  ┌────────────┐  ┌────────────┐  ┌────────────┐            │
│  │  Frontend  │  │  Backend   │  │  Database  │            │
│  │   Logs     │  │   Logs     │  │   Logs     │            │
│  └─────┬──────┘  └─────┬──────┘  └─────┬──────┘            │
└────────┼───────────────┼───────────────┼────────────────────┘
         │               │               │
         │               │               │
         └───────────────┼───────────────┘
                         │
                         ▼
┌──────────────────────────────────────────────────────────────┐
│                  Log Aggregation Layer                        │
│  ┌──────────────────────────────────────────────────────┐   │
│  │            Fluentd / Logstash                         │   │
│  │  - Log Collection                                     │   │
│  │  - Log Parsing & Filtering                            │   │
│  │  - Log Forwarding                                     │   │
│  └─────────────────────┬────────────────────────────────┘   │
└────────────────────────┼─────────────────────────────────────┘
                         │
                         ▼
┌──────────────────────────────────────────────────────────────┐
│                  Storage & Analysis Layer                     │
│  ┌──────────────────────────────────────────────────────┐   │
│  │              Elasticsearch / CloudWatch              │   │
│  │  - Log Storage                                        │   │
│  │  - Full-text Search                                   │   │
│  │  - Log Analysis                                       │   │
│  └─────────────────────┬────────────────────────────────┘   │
└────────────────────────┼─────────────────────────────────────┘
                         │
                         ▼
┌──────────────────────────────────────────────────────────────┐
│                  Visualization Layer                          │
│  ┌──────────────────────────────────────────────────────┐   │
│  │          Kibana / CloudWatch Dashboard               │   │
│  │  - Real-time Dashboards                               │   │
│  │  - Alert Configuration                                │   │
│  │  - Performance Metrics                                │   │
│  └──────────────────────────────────────────────────────┘   │
└──────────────────────────────────────────────────────────────┘
```

## 7. 스케일링 전략

```
┌──────────────────────────────────────────────────────────────┐
│                   Horizontal Pod Autoscaler                   │
│                                                               │
│   Metrics:                    Thresholds:                     │
│   - CPU Usage                 - CPU > 70%: Scale Up          │
│   - Memory Usage              - Memory > 80%: Scale Up       │
│   - Request Rate              - Requests > 1000/s: Scale Up  │
│   - Response Time             - Latency > 500ms: Scale Up    │
│                                                               │
│   ┌─────────────────────────────────────────────────────┐   │
│   │         Current State: 2 Pods (min: 2, max: 10)     │   │
│   └─────────────────────────────────────────────────────┘   │
│                                                               │
│   When CPU > 70%:                                            │
│   ┌────┐ ┌────┐  ──Scale Up──▶  ┌────┐ ┌────┐ ┌────┐      │
│   │Pod1│ │Pod2│                   │Pod1│ │Pod2│ │Pod3│      │
│   └────┘ └────┘                   └────┘ └────┘ └────┘      │
│                                                               │
│   When CPU < 30% for 5 minutes:                             │
│   ┌────┐ ┌────┐ ┌────┐  ──Scale Down──▶  ┌────┐ ┌────┐    │
│   │Pod1│ │Pod2│ │Pod3│                     │Pod1│ │Pod2│    │
│   └────┘ └────┘ └────┘                     └────┘ └────┘    │
└──────────────────────────────────────────────────────────────┘
```

## 기술 스택 요약

| 계층 | 기술 | 목적 |
|------|------|------|
| Frontend | React, Vite | SPA 개발, 빠른 빌드 |
| Backend | Node.js, Express | REST API 서버 |
| Database | MongoDB, MySQL | NoSQL + Relational DB |
| AI/ML | TensorFlow.js | 실시간 관심도 분석 |
| Container | Docker, Docker Compose | 컨테이너화 |
| Orchestration | Kubernetes | 컨테이너 오케스트레이션 |
| CI/CD | GitHub Actions | 자동화된 배포 파이프라인 |
| Hosting | GitHub Pages, Vercel | 정적 파일 호스팅 |
| Version Control | Git, GitHub | 소스 코드 관리 |
